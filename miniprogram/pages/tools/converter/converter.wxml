<!--converter.wxml-->
<view class="converter-container">
  <!-- È°µÈù¢Â§¥ÈÉ® -->
  <view class="page-header">
    <view class="header-title">
      <text class="title-text">Âçï‰ΩçËΩ¨Êç¢</text>
    </view>
    <view class="header-actions">
      <view class="favorite-btn {{isFavorite ? 'favorited' : ''}}" bindtap="onToggleFavorite">
        <text class="favorite-icon">{{isFavorite ? '‚ù§Ô∏è' : 'ü§ç'}}</text>
      </view>
    </view>
  </view>

  <!-- ËΩ¨Êç¢Á±ªÂûãÈÄâÊã© -->
  <view class="type-selector">
    <scroll-view scroll-x class="type-scroll">
      <view class="type-list">
        <view 
          wx:for="{{conversionTypes}}" 
          wx:key="id"
          class="type-item {{currentType === item.id ? 'active' : ''}}"
          bindtap="onTypeChange"
          data-type="{{item.id}}"
        >
          <view class="type-icon">{{item.icon}}</view>
          <text class="type-name">{{item.name}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- ËΩ¨Êç¢‰∏ª‰Ωì -->
  <view class="conversion-main">
    <!-- ËæìÂÖ•Âå∫Âüü -->
    <view class="input-section">
      <view class="input-header">
        <text class="section-title">‰ªé</text>
      </view>
      
      <view class="input-row">
        <input 
          class="value-input"
          type="digit"
          placeholder="ËØ∑ËæìÂÖ•Êï∞ÂÄº"
          value="{{inputValue}}"
          bindinput="onInputChange"
          bindconfirm="onInputConfirm"
        />
        <picker 
          class="unit-picker"
          mode="selector"
          range="{{fromUnits}}"
          range-key="name"
          value="{{fromUnitIndex}}"
          bindchange="onFromUnitChange"
        >
          <view class="picker-display">
            <text class="unit-text">{{fromUnits[fromUnitIndex].name}}</text>
            <text class="picker-arrow">‚ñº</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- ‰∫§Êç¢ÊåâÈíÆ -->
    <view class="swap-section">
      <view class="swap-btn" bindtap="onSwapUnits">
        <text class="swap-icon">‚áÖ</text>
      </view>
    </view>

    <!-- ËæìÂá∫Âå∫Âüü -->
    <view class="output-section">
      <view class="output-header">
        <text class="section-title">Âà∞</text>
      </view>
      
      <view class="output-row">
        <view class="value-output">
          <text class="output-value">{{outputValue}}</text>
        </view>
        <picker 
          class="unit-picker"
          mode="selector"
          range="{{toUnits}}"
          range-key="name"
          value="{{toUnitIndex}}"
          bindchange="onToUnitChange"
        >
          <view class="picker-display">
            <text class="unit-text">{{toUnits[toUnitIndex].name}}</text>
            <text class="picker-arrow">‚ñº</text>
          </view>
        </picker>
      </view>
      
      <!-- Â§çÂà∂ÊåâÈíÆ -->
      <view wx:if="{{outputValue && outputValue !== '0'}}" class="copy-section">
        <view class="copy-btn" bindtap="onCopyResult">
          <text class="copy-icon">üìã</text>
          <text class="copy-text">Â§çÂà∂ÁªìÊûú</text>
        </view>
      </view>
    </view>
  </view>


  <!-- ÂéÜÂè≤ËÆ∞ÂΩï -->
  <view class="history-section">
    <view class="history-header">
      <text class="section-title">ËΩ¨Êç¢ÂéÜÂè≤</text>
      <view wx:if="{{history.length > 0}}" class="clear-history" bindtap="onClearHistory">
        <text>Ê∏ÖÁ©∫</text>
      </view>
    </view>
    
    <view wx:if="{{history.length === 0}}" class="empty-history">
      <text>ÊöÇÊó†ËΩ¨Êç¢ÂéÜÂè≤</text>
    </view>
    
    <scroll-view wx:else scroll-y class="history-list">
      <view 
        wx:for="{{history}}" 
        wx:key="id"
        class="history-item"
        bindtap="onSelectHistory"
        data-item="{{item}}"
      >
        <view class="history-conversion">
          <text class="history-input">{{item.inputValue}} {{item.fromUnit}}</text>
          <text class="history-arrow">‚Üí</text>
          <text class="history-output">{{item.outputValue}} {{item.toUnit}}</text>
        </view>
        <text class="history-time">{{item.time}}</text>
      </view>
    </scroll-view>
  </view>
</view>

<!-- Âä†ËΩΩÁªÑ‰ª∂ -->
<loading show="{{isLoading}}" text="{{loadingText}}"></loading> 